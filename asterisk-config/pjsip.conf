[global]
type=global
debug=yes

[system]
type=system
timer_t1=500
timer_b=32000
disable_tcp_switch=yes

[transport-udp]
type=transport
protocol=udp
bind=0.0.0.0:5060
local_net=10.0.0.0/8
local_net=172.16.0.0/12
local_net=192.168.0.0/16

[transport-tls]
type=transport
protocol=tls
bind=0.0.0.0:5061
cert_file=/etc/asterisk/keys/asterisk.crt
private_key_file=/etc/asterisk/keys/asterisk.key

; SIP Trunk Configuration (replace with your provider details)
[trunk]
type=endpoint
context=from-telnyx
disallow=all
allow=ulaw
allow=alaw
allow=g729
outbound_auth=auth_trunk
aors=trunk
direct_media=no
force_rport=yes
rewrite_contact=yes
rtp_symmetric=yes
force_avp=yes
ice_support=yes
use_ptime=yes
media_use_received_transport=yes
rtp_timeout=60
rtp_timeout_hold=600
rtp_keepalive=15

[auth_trunk]
type=auth
auth_type=userpass
username=YOUR_USERNAME
password=YOUR_PASSWORD

[trunk]
type=aor
contact=sip:YOUR_PROVIDER_IP:5060
qualify_frequency=60
qualify_timeout=3.0
default_expiration=3600
maximum_expiration=7200
minimum_expiration=60

[trunk]
type=identify
endpoint=trunk
match=YOUR_PROVIDER_IP

; Internal Extension (for testing)
[1000]
type=endpoint
context=internal
disallow=all
allow=ulaw
allow=alaw
allow=g729
auth=auth1000
aors=1000
direct_media=no
force_rport=yes
rewrite_contact=yes
rtp_symmetric=yes
force_avp=yes
ice_support=yes
use_ptime=yes
media_use_received_transport=yes
rtp_timeout=60
rtp_timeout_hold=600
rtp_keepalive=15

[auth1000]
type=auth
auth_type=userpass
username=1000
password=password123

[1000]
type=aor
contact=sip:1000@dynamic
qualify_frequency=60
qualify_timeout=3.0
default_expiration=3600
maximum_expiration=7200
minimum_expiration=60

[1000]
type=auth
auth_type=userpass
username=1000
password=password123 